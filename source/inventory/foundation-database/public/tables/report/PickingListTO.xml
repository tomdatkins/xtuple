<!DOCTYPE openRPTDef>
<report>
 <title>Picking List (Transfer Order)</title>
 <name>PickingListTO</name>
 <description>Transfer Order Picking List - no closed lines</description>
 <parameter listtype="static" type="string" name="tohead_id" active="true" default="34">
  <description></description>
 </parameter>
 <grid>
  <snap/>
  <show/>
  <x>0.05</x>
  <y>0.05</y>
 </grid>
 <size>Letter</size>
 <portrait/>
 <topmargin>25</topmargin>
 <bottommargin>25</bottommargin>
 <rightmargin>25</rightmargin>
 <leftmargin>25</leftmargin>
 <querysource>
  <name>head</name>
  <sql>SELECT formattobarcode(tohead_id) AS order_barcode,
       formataddr(tohead_destaddress1,
                  tohead_destaddress2,
                  tohead_destaddress3,
                  (COALESCE(tohead_destcity, '') || '  ' ||   COALESCE(tohead_deststate,'') || '  ' || COALESCE(tohead_destpostalcode, '')),
                  tohead_destcountry) AS shipping_address,
       tohead_destcntct_name,
       tohead_destphone,
       tohead_number,
       tohead_shipvia,
       formatDate(tohead_orderdate) AS orderdate,
       formatDate(tohead_packdate) AS packdate,
       tohead_shipcomments,
       srcWhs.warehous_descrip as srcWarehous,
       destWhs.warehous_descrip as destWarehous
  FROM tohead
  JOIN whsinfo srcWhs ON (tohead_src_warehous_id=srcWhs.warehous_id)
  JOIN whsinfo destWhs ON (tohead_dest_warehous_id=destWhs.warehous_id)
  WHERE (tohead_id=&lt;? value("tohead_id") ?>);</sql>
 </querysource>
 <querysource>
  <name>detail</name>
  <sql>SELECT 1 AS groupby,
       toitem_linenumber AS sortline,
       toitem_linenumber AS linenumber,
       toitem_notes,
       item_number,
       formatitemsitebarcode((SELECT itemsite_id
                             FROM itemsite
                             WHERE itemsite_warehous_id=tohead_src_warehous_id
                             AND itemsite_item_id=toitem_item_id)) AS item_barcode,
       toitem_uom,
       item_descrip1,
       item_descrip2,
       formatQty(toitem_qty_ordered) AS ordered,
       toitem_qty_shipped AS shipped,
       formatQty(noNeg(toitem_qty_ordered - toitem_qty_shipped - qtyAtShipping('TO', toitem_id)))
         AS balance,
       CASE WHEN (qtyAtShipping('TO', toitem_id) > 0.0)
            THEN formatQty(qtyAtShipping('TO', toitem_id))
            ELSE NULL
       END AS atShipping,
       toitem_status AS f_status
  FROM toitem
  JOIN tohead ON (tohead_id=toitem_tohead_id)
  JOIN item ON (item_id=toitem_item_id)
 WHERE ((toitem_tohead_id=&lt;? value("tohead_id") ?>)
   AND (toitem_status &lt;> 'X')
   AND (toitem_status &lt;> 'C')
)
ORDER BY sortline;</sql>
 </querysource>
 <querysource>
  <name>logo</name>
  <sql>SELECT image_data
FROM image
WHERE ((image_name='logo'));</sql>
 </querysource>
 <rpthead>
  <height>385</height>
  <image>
   <rect>
    <x>375</x>
    <y>0</y>
    <width>425</width>
    <height>85</height>
   </rect>
   <mode>stretch</mode>
   <data>
    <query>logo</query>
    <column>image_data</column>
   </data>
  </image>
  <field>
   <rect>
    <x>105</x>
    <y>315</y>
    <width>253</width>
    <height>25</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>12</size>
    <weight>normal</weight>
   </font>
   <left/>
   <top/>
   <data>
    <query>head</query>
    <column>tohead_destcntct_name</column>
   </data>
  </field>
  <label>
   <rect>
    <x>635</x>
    <y>340</y>
    <width>100</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>At Shipping</string>
  </label>
  <label>
   <rect>
    <x>375</x>
    <y>175</y>
    <width>75</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>14</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Ship To:</string>
  </label>
  <label>
   <rect>
    <x>15</x>
    <y>145</y>
    <width>121</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>14</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Pack Date:</string>
  </label>
  <field>
   <rect>
    <x>170</x>
    <y>145</y>
    <width>100</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>14</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>head</query>
    <column>packdate</column>
   </data>
  </field>
  <text>
   <rect>
    <x>465</x>
    <y>200</y>
    <width>305</width>
    <height>20</height>
   </rect>
   <bottompad>10</bottompad>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <left/>
   <top/>
   <data>
    <query>head</query>
    <column>shipping_address</column>
   </data>
  </text>
  <label>
   <rect>
    <x>10</x>
    <y>5</y>
    <width>270</width>
    <height>40</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>20</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Picking List (TO)</string>
  </label>
  <field>
   <rect>
    <x>465</x>
    <y>150</y>
    <width>331</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>14</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>head</query>
    <column>tohead_shipvia</column>
   </data>
  </field>
  <label>
   <rect>
    <x>240</x>
    <y>340</y>
    <width>55</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Ordered</string>
  </label>
  <label>
   <rect>
    <x>350</x>
    <y>150</y>
    <width>102</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>14</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Ship Via:</string>
  </label>
  <barcode>
   <rect>
    <x>375</x>
    <y>95</y>
    <width>233</width>
    <height>25</height>
   </rect>
   <format>128</format>
   <maxlength>10</maxlength>
   <left/>
   <narrowBarWidth>0.01</narrowBarWidth>
   <data>
    <query>head</query>
    <column>order_barcode</column>
   </data>
  </barcode>
  <field>
   <rect>
    <x>170</x>
    <y>120</y>
    <width>100</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>14</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>head</query>
    <column>orderdate</column>
   </data>
  </field>
  <label>
   <rect>
    <x>10</x>
    <y>315</y>
    <width>95</width>
    <height>25</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>12</size>
    <weight>normal</weight>
   </font>
   <left/>
   <top/>
   <string>Attention:</string>
  </label>
  <label>
   <rect>
    <x>425</x>
    <y>340</y>
    <width>100</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Shipped</string>
  </label>
  <field>
   <rect>
    <x>170</x>
    <y>95</y>
    <width>100</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>14</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>head</query>
    <column>tohead_number</column>
   </data>
  </field>
  <line>
   <xstart>10</xstart>
   <ystart>380</ystart>
   <xend>808</xend>
   <yend>380</yend>
   <weight>0</weight>
  </line>
  <label>
   <rect>
    <x>15</x>
    <y>95</y>
    <width>60</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>14</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>T/O #:</string>
  </label>
  <line>
   <xstart>10</xstart>
   <ystart>340</ystart>
   <xend>808</xend>
   <yend>340</yend>
   <weight>0</weight>
  </line>
  <field>
   <rect>
    <x>465</x>
    <y>175</y>
    <width>305</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>14</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>head</query>
    <column>destWarehous</column>
   </data>
  </field>
  <label>
   <rect>
    <x>10</x>
    <y>360</y>
    <width>95</width>
    <height>13</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Item Description</string>
  </label>
  <label>
   <rect>
    <x>730</x>
    <y>340</y>
    <width>55</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Packed</string>
  </label>
  <label>
   <rect>
    <x>10</x>
    <y>340</y>
    <width>85</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Item Number</string>
  </label>
  <label>
   <rect>
    <x>530</x>
    <y>340</y>
    <width>100</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Balance</string>
  </label>
  <label>
   <rect>
    <x>-5</x>
    <y>120</y>
    <width>102</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>14</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>T/O Date:</string>
  </label>
  <label>
   <rect>
    <x>15</x>
    <y>65</y>
    <width>122</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>14</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Site:</string>
  </label>
  <field>
   <rect>
    <x>170</x>
    <y>65</y>
    <width>100</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>14</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>head</query>
    <column>srcWarehous</column>
   </data>
  </field>
 </rpthead>
 <section>
  <name>detail</name>
  <group>
   <name>detail</name>
   <column>groupby</column>
   <foot>
    <height>68</height>
    <text>
     <rect>
      <x>50</x>
      <y>5</y>
      <width>625</width>
      <height>17</height>
     </rect>
     <bottompad>14</bottompad>
     <font>
      <face>Arial</face>
      <size>10</size>
      <weight>normal</weight>
     </font>
     <left/>
     <vcenter/>
     <data>
      <query>head</query>
      <column>tohead_shipcomments</column>
     </data>
    </text>
   </foot>
  </group>
  <group>
   <name>lineitem</name>
   <column>linenumber</column>
   <foot>
    <height>23</height>
    <line>
     <xstart>5</xstart>
     <ystart>5</ystart>
     <xend>843</xend>
     <yend>5</yend>
     <weight>0</weight>
    </line>
   </foot>
  </group>
  <detail>
   <key>
    <query>detail</query>
   </key>
   <height>148</height>
   <label>
    <rect>
     <x>25</x>
     <y>65</y>
     <width>48</width>
     <height>17</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>10</size>
     <weight>normal</weight>
    </font>
    <right/>
    <vcenter/>
    <string>Carton:</string>
   </label>
   <field>
    <rect>
     <x>630</x>
     <y>100</y>
     <width>85</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>10</size>
     <weight>normal</weight>
    </font>
    <right/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>f_status</column>
    </data>
   </field>
   <field>
    <rect>
     <x>25</x>
     <y>40</y>
     <width>295</width>
     <height>20</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>11</size>
     <weight>bold</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>item_descrip2</column>
    </data>
   </field>
   <line>
    <xstart>190</xstart>
    <ystart>110</ystart>
    <xend>280</xend>
    <yend>110</yend>
    <weight>0</weight>
   </line>
   <field>
    <rect>
     <x>635</x>
     <y>0</y>
     <width>100</width>
     <height>20</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>10</size>
     <weight>normal</weight>
    </font>
    <right/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>atshipping</column>
    </data>
   </field>
   <field>
    <rect>
     <x>25</x>
     <y>20</y>
     <width>295</width>
     <height>20</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>11</size>
     <weight>bold</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>item_descrip1</column>
    </data>
   </field>
   <label>
    <rect>
     <x>565</x>
     <y>100</y>
     <width>60</width>
     <height>17</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>10</size>
     <weight>normal</weight>
    </font>
    <right/>
    <top/>
    <string>Status:</string>
   </label>
   <text>
    <rect>
     <x>100</x>
     <y>120</y>
     <width>690</width>
     <height>17</height>
    </rect>
    <bottompad>14</bottompad>
    <font>
     <face>Arial</face>
     <size>10</size>
     <weight>normal</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>toitem_notes</column>
    </data>
   </text>
   <line>
    <xstart>415</xstart>
    <ystart>110</ystart>
    <xend>500</xend>
    <yend>110</yend>
    <weight>0</weight>
   </line>
   <label>
    <rect>
     <x>565</x>
     <y>70</y>
     <width>60</width>
     <height>17</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>10</size>
     <weight>normal</weight>
    </font>
    <right/>
    <top/>
    <string>Batch #:</string>
   </label>
   <label>
    <rect>
     <x>20</x>
     <y>120</y>
     <width>75</width>
     <height>17</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>10</size>
     <weight>normal</weight>
    </font>
    <right/>
    <vcenter/>
    <string>Notes:</string>
   </label>
   <line>
    <xstart>415</xstart>
    <ystart>80</ystart>
    <xend>500</xend>
    <yend>80</yend>
    <weight>0</weight>
   </line>
   <line>
    <xstart>80</xstart>
    <ystart>110</ystart>
    <xend>170</xend>
    <yend>110</yend>
    <weight>0</weight>
   </line>
   <line>
    <xstart>190</xstart>
    <ystart>80</ystart>
    <xend>280</xend>
    <yend>80</yend>
    <weight>0</weight>
   </line>
   <field>
    <rect>
     <x>530</x>
     <y>0</y>
     <width>100</width>
     <height>20</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>10</size>
     <weight>normal</weight>
    </font>
    <right/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>balance</column>
    </data>
   </field>
   <line>
    <xstart>305</xstart>
    <ystart>110</ystart>
    <xend>395</xend>
    <yend>110</yend>
    <weight>0</weight>
   </line>
   <line>
    <xstart>305</xstart>
    <ystart>80</ystart>
    <xend>395</xend>
    <yend>80</yend>
    <weight>0</weight>
   </line>
   <field>
    <rect>
     <x>25</x>
     <y>0</y>
     <width>200</width>
     <height>20</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>11</size>
     <weight>bold</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>item_number</column>
    </data>
   </field>
   <label>
    <rect>
     <x>25</x>
     <y>95</y>
     <width>48</width>
     <height>17</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>10</size>
     <weight>normal</weight>
    </font>
    <right/>
    <vcenter/>
    <string>Qty:</string>
   </label>
   <field>
    <rect>
     <x>425</x>
     <y>0</y>
     <width>100</width>
     <height>20</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>10</size>
     <weight>normal</weight>
    </font>
    <right/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>shipped</column>
    </data>
   </field>
   <field>
    <rect>
     <x>230</x>
     <y>0</y>
     <width>85</width>
     <height>20</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>10</size>
     <weight>normal</weight>
    </font>
    <right/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>ordered</column>
    </data>
   </field>
   <line>
    <xstart>745</xstart>
    <ystart>15</ystart>
    <xend>795</xend>
    <yend>15</yend>
    <weight>1</weight>
   </line>
   <line>
    <xstart>80</xstart>
    <ystart>80</ystart>
    <xend>170</xend>
    <yend>80</yend>
    <weight>0</weight>
   </line>
   <barcode>
    <rect>
     <x>325</x>
     <y>25</y>
     <width>468</width>
     <height>35</height>
    </rect>
    <format>128</format>
    <maxlength>15</maxlength>
    <left/>
    <narrowBarWidth>0.01</narrowBarWidth>
    <data>
     <query>detail</query>
     <column>item_barcode</column>
    </data>
   </barcode>
   <line>
    <xstart>632</xstart>
    <ystart>80</ystart>
    <xend>720</xend>
    <yend>80</yend>
    <weight>0</weight>
   </line>
   <field>
    <rect>
     <x>630</x>
     <y>85</y>
     <width>85</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>10</size>
     <weight>normal</weight>
    </font>
    <right/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>toitem_uom</column>
    </data>
   </field>
   <label>
    <rect>
     <x>565</x>
     <y>85</y>
     <width>60</width>
     <height>17</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>10</size>
     <weight>normal</weight>
    </font>
    <right/>
    <top/>
    <string>UOM:</string>
   </label>
  </detail>
 </section>
 <pgfoot>
  <height>56</height>
  <label>
   <rect>
    <x>695</x>
    <y>6</y>
    <width>37</width>
    <height>17</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <top/>
   <string>Page:</string>
  </label>
  <field>
   <rect>
    <x>455</x>
    <y>6</y>
    <width>80</width>
    <height>17</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <top/>
   <data>
    <query>head</query>
    <column>tohead_number</column>
   </data>
  </field>
  <field>
   <rect>
    <x>90</x>
    <y>6</y>
    <width>95</width>
    <height>17</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <top/>
   <data>
    <query>Context Query</query>
    <column>report_date</column>
   </data>
  </field>
  <field>
   <rect>
    <x>735</x>
    <y>6</y>
    <width>45</width>
    <height>17</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <top/>
   <data>
    <query>Context Query</query>
    <column>page_number</column>
   </data>
  </field>
  <label>
   <rect>
    <x>360</x>
    <y>6</y>
    <width>90</width>
    <height>17</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <top/>
   <string>Transfer Order #:</string>
  </label>
  <label>
   <rect>
    <x>25</x>
    <y>6</y>
    <width>62</width>
    <height>17</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <top/>
   <string>Print Date: </string>
  </label>
 </pgfoot>
 <rptfoot>
  <height>111</height>
  <line>
   <xstart>185</xstart>
   <ystart>25</ystart>
   <xend>363</xend>
   <yend>25</yend>
   <weight>0</weight>
  </line>
  <label>
   <rect>
    <x>40</x>
    <y>66</y>
    <width>160</width>
    <height>35</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>14</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Completed By:</string>
  </label>
  <line>
   <xstart>186</xstart>
   <ystart>90</ystart>
   <xend>360</xend>
   <yend>90</yend>
   <weight>0</weight>
  </line>
  <label>
   <rect>
    <x>40</x>
    <y>6</y>
    <width>165</width>
    <height>30</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>14</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Checked By:</string>
  </label>
 </rptfoot>
</report>
