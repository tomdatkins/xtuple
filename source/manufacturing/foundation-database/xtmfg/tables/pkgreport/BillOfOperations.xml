<!DOCTYPE openRPTDef>
<report>
 <title>Routing</title>
 <name>BillOfOperations</name>
 <description>Prints each operation's image that is linked as type Engineering. Supports revisions.</description>
 <grid>
  <snap/>
  <show/>
  <x>0.05</x>
  <y>0.05</y>
 </grid>
 <size>Letter</size>
 <portrait/>
 <topmargin>50</topmargin>
 <bottommargin>50</bottommargin>
 <rightmargin>50</rightmargin>
 <leftmargin>50</leftmargin>
 <querysource>
  <name>Head</name>
  <sql>SELECT item_number,
       uom_name AS item_invuom,
       item_descrip1,
       item_descrip2
  FROM item JOIN uom ON (uom_id=item_inv_uom_id)
 WHERE (item_id=&lt;? value("item_id") ?>);
    </sql>
 </querysource>
 <querysource>
  <name>Detail</name>
  <sql>SELECT image_data,
       booitem_seqnumber AS seqnumber,
       booitem_descrip1,
       booitem_descrip2,
       booitem_toolref,
       booitem_instruc,
       booitem_effective,
       booitem_expires,
       wrkcnt_code 
FROM xtmfg.wrkcnt,
     &lt;? if exists("revision_id") ?>
       xtmfg.booitem(&lt;? value("item_id") ?>,
                     &lt;? value("revision_id") ?>)
     &lt;? else ?>
        xtmfg.booitem(&lt;? value("item_id") ?>)
     &lt;? endif ?>
  LEFT OUTER JOIN xtmfg.booimage ON (booimage_booitem_id = booitem_id
                                 AND booimage_purpose = 'E')	
  LEFT OUTER JOIN image ON (booimage_image_id = image_id)
WHERE ((booitem_wrkcnt_id = wrkcnt_id)
&lt;? if not exists("showFuture") ?>
   AND (booitem_effective &lt;= CURRENT_DATE)
&lt;? endif ?>
&lt;? if not exists("showExpired") ?>
   AND (booitem_expires > CURRENT_DATE)
&lt;? endif ?>
)
ORDER BY seqnumber;
</sql>
 </querysource>
 <querysource>
  <name>RevisionHead</name>
  <sql>SELECT boohead_docnum, boohead_revision,
       formatDate(boohead_revisiondate) AS f_revisiondate
FROM xtmfg.boohead
WHERE ((boohead_item_id=&lt;? value("item_id") ?>)
&lt;? if exists("revision_id") ?>
   AND (boohead_rev_id=&lt;? value("revision_id") ?>)
&lt;? else ?>
   AND (boohead_rev_id=getActiveRevId('BOO',&lt;? value("item_id") ?>))
&lt;? endif ?>
);</sql>
 </querysource>
 <rpthead>
  <height>183</height>
  <label>
   <rect>
    <x>5</x>
    <y>145</y>
    <width>240</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Effective Operations</string>
  </label>
  <field>
   <rect>
    <x>525</x>
    <y>100</y>
    <width>220</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>RevisionHead</query>
    <column>boohead_docnum</column>
   </data>
  </field>
  <label>
   <rect>
    <x>475</x>
    <y>160</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Work Center</string>
  </label>
  <label>
   <rect>
    <x>620</x>
    <y>160</y>
    <width>80</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Tooling Ref.</string>
  </label>
  <line>
   <xstart>5</xstart>
   <ystart>175</ystart>
   <xend>745</xend>
   <yend>175</yend>
   <weight>2</weight>
  </line>
  <label>
   <rect>
    <x>0</x>
    <y>60</y>
    <width>40</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Item:</string>
  </label>
  <label>
   <rect>
    <x>375</x>
    <y>60</y>
    <width>135</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Revision Number:</string>
  </label>
  <field>
   <rect>
    <x>525</x>
    <y>60</y>
    <width>215</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>RevisionHead</query>
    <column>boohead_revision</column>
   </data>
  </field>
  <label>
   <rect>
    <x>432</x>
    <y>5</y>
    <width>305</width>
    <height>40</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>20</size>
    <weight>bold</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Routing</string>
  </label>
  <label>
   <rect>
    <x>75</x>
    <y>160</y>
    <width>400</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Description</string>
  </label>
  <field>
   <rect>
    <x>45</x>
    <y>60</y>
    <width>200</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Head</query>
    <column>item_number</column>
   </data>
  </field>
  <field>
   <rect>
    <x>525</x>
    <y>80</y>
    <width>160</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>RevisionHead</query>
    <column>f_revisiondate</column>
   </data>
  </field>
  <label>
   <rect>
    <x>375</x>
    <y>100</y>
    <width>135</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Document Number:</string>
  </label>
  <field>
   <rect>
    <x>45</x>
    <y>100</y>
    <width>300</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Head</query>
    <column>item_descrip2</column>
   </data>
  </field>
  <label>
   <rect>
    <x>375</x>
    <y>80</y>
    <width>135</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Revision Date:</string>
  </label>
  <field>
   <rect>
    <x>45</x>
    <y>80</y>
    <width>300</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Head</query>
    <column>item_descrip1</column>
   </data>
  </field>
  <label>
   <rect>
    <x>5</x>
    <y>160</y>
    <width>60</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Seq. #</string>
  </label>
 </rpthead>
 <pghead>
  <firstpage/>
  <height>6</height>
 </pghead>
 <pghead>
  <height>21</height>
  <line>
   <xstart>5</xstart>
   <ystart>15</ystart>
   <xend>745</xend>
   <yend>15</yend>
   <weight>2</weight>
  </line>
  <label>
   <rect>
    <x>620</x>
    <y>0</y>
    <width>160</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Tooling Ref.</string>
  </label>
  <label>
   <rect>
    <x>475</x>
    <y>0</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Work Center</string>
  </label>
  <label>
   <rect>
    <x>75</x>
    <y>0</y>
    <width>400</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Description</string>
  </label>
  <label>
   <rect>
    <x>5</x>
    <y>0</y>
    <width>60</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Seq. #</string>
  </label>
 </pghead>
 <section>
  <name>detail</name>
  <detail>
   <key>
    <query>Detail</query>
   </key>
   <height>233</height>
   <image>
    <rect>
     <x>475</x>
     <y>30</y>
     <width>270</width>
     <height>160</height>
    </rect>
    <mode>stretch</mode>
    <data>
     <query>Detail</query>
     <column>image_data</column>
    </data>
   </image>
   <label>
    <rect>
     <x>5</x>
     <y>45</y>
     <width>60</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <vcenter/>
    <string>Expires:</string>
   </label>
   <field>
    <rect>
     <x>75</x>
     <y>45</y>
     <width>160</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>normal</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>Detail</query>
     <column>booitem_expires</column>
    </data>
   </field>
   <label>
    <rect>
     <x>475</x>
     <y>15</y>
     <width>215</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <vcenter/>
    <string>Operation Image (Type: Engineering):</string>
   </label>
   <field>
    <rect>
     <x>75</x>
     <y>30</y>
     <width>160</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>normal</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>Detail</query>
     <column>booitem_effective</column>
    </data>
   </field>
   <field>
    <rect>
     <x>75</x>
     <y>15</y>
     <width>400</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>normal</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>Detail</query>
     <column>booitem_descrip2</column>
    </data>
   </field>
   <text>
    <rect>
     <x>0</x>
     <y>85</y>
     <width>460</width>
     <height>15</height>
    </rect>
    <bottompad>14</bottompad>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>normal</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>Detail</query>
     <column>booitem_instruc</column>
    </data>
   </text>
   <label>
    <rect>
     <x>5</x>
     <y>30</y>
     <width>60</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <vcenter/>
    <string>Effective:</string>
   </label>
   <field>
    <rect>
     <x>620</x>
     <y>0</y>
     <width>160</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>normal</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>Detail</query>
     <column>booitem_toolref</column>
    </data>
   </field>
   <field>
    <rect>
     <x>75</x>
     <y>0</y>
     <width>400</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>normal</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>Detail</query>
     <column>booitem_descrip1</column>
    </data>
   </field>
   <label>
    <rect>
     <x>0</x>
     <y>70</y>
     <width>140</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <vcenter/>
    <string>Operation Instructions:</string>
   </label>
   <field>
    <rect>
     <x>5</x>
     <y>0</y>
     <width>60</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>normal</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>Detail</query>
     <column>seqnumber</column>
    </data>
   </field>
   <field>
    <rect>
     <x>475</x>
     <y>0</y>
     <width>100</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>normal</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>Detail</query>
     <column>wrkcnt_code</column>
    </data>
   </field>
  </detail>
 </section>
 <pgfoot>
  <height>18</height>
  <field>
   <rect>
    <x>85</x>
    <y>0</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Context Query</query>
    <column>report_date</column>
   </data>
  </field>
  <field>
   <rect>
    <x>705</x>
    <y>0</y>
    <width>40</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Context Query</query>
    <column>page_number</column>
   </data>
  </field>
  <label>
   <rect>
    <x>620</x>
    <y>0</y>
    <width>80</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Page:</string>
  </label>
  <label>
   <rect>
    <x>0</x>
    <y>0</y>
    <width>80</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Report Date:</string>
  </label>
 </pgfoot>
</report>
