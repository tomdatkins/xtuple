<!DOCTYPE openRPTDef>
<report>
 <title>Quality Certificate of Compliance</title>
 <name>QualityCertificate</name>
 <description>Quality Certificate of Compliance - prints for tests in PASS status only</description>
 <parameter default="" active="true" listtype="static" type="integer" name="id">
  <description></description>
 </parameter>
 <grid>
  <snap/>
  <show/>
  <x>0.05</x>
  <y>0.05</y>
 </grid>
 <size>Letter</size>
 <portrait/>
 <topmargin>50</topmargin>
 <bottommargin>28</bottommargin>
 <rightmargin>50</rightmargin>
 <leftmargin>50</leftmargin>
 <querysource>
  <name>Head</name>
  <sql>SELECT 
  qthead.qthead_number, 
  qphead.qphead_code, 
  qphead.qphead_descrip, 
  qthead.qthead_rev_number, 
  formatDate(qthead.qthead_start_date) as f_start_date, 
  formatDate(qthead.qthead_completed_date) AS f_completed_date, 
  CASE WHEN qthead.qthead_status = 'O' THEN 'Open'
       WHEN qthead.qthead_status = 'P' THEN 'Pass'
       WHEN qthead.qthead_status = 'F' THEN 'Fail'
       END AS test_status,
  CASE WHEN qthead.qthead_disposition = 'I' THEN 'In-Process'
       WHEN qthead.qthead_disposition = 'OK' THEN 'Released'
       WHEN qthead.qthead_disposition = 'Q' THEN 'Quarantine'
       WHEN qthead.qthead_disposition = 'R' THEN 'Rework'
       WHEN qthead.qthead_disposition = 'S' THEN 'Scrap'
       END AS disposition,
  qthead.qthead_notes, 
  qthead.qthead_ordtype ||' - '||qthead.qthead_ordnumber AS document_number, 
  item.item_number, 
  item.item_descrip1, 
  whsinfo.warehous_code, 
  ls.ls_number
FROM xt.qthead 
  JOIN xt.qphead ON (qthead.qthead_qphead_id = qphead.qphead_id AND
    qthead.qthead_rev_number = qphead.qphead_rev_number)
  JOIN public.item ON (qthead.qthead_item_id = item.item_id)
  JOIN public.whsinfo ON (qthead.qthead_warehous_id = whsinfo.warehous_id)
  LEFT OUTER JOIN ls ON (qthead.qthead_ls_id = ls.ls_id)

WHERE qthead.obj_uuid = &lt;? value("id") ?>
AND qthead_status = 'P';</sql>
 </querysource>
 <querysource>
  <name>Detail</name>
  <sql>SELECT 
  qtitem.qtitem_linenumber, 
  qtitem.qtitem_description, 
  qtitem.qtitem_instruction, 
  qtitem.qtitem_type, 
  qtitem.qtitem_target, 
  qtitem.qtitem_upper, 
  qtitem.qtitem_lower, 
  qtitem.qtitem_uom, 
  qtitem.qtitem_actual, 
  CASE WHEN qtitem.qtitem_status = 'O' THEN 'Open' 
       WHEN qtitem.qtitem_status = 'P' THEN 'Pass'
       WHEN qtitem.qtitem_status = 'F' THEN 'Fail'
       END AS test_item_status,
  qtitem.qtitem_notes
FROM xt.qtitem
JOIN xt.qthead ON (qtitem_qthead_id = qthead_id AND qthead_status = 'P')

WHERE qthead.obj_uuid = &lt;? value("id") ?></sql>
 </querysource>
 <rpthead>
  <height>317</height>
  <field>
   <rect>
    <x>140</x>
    <y>170</y>
    <width>215</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>14</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Head</query>
    <column>ls_number</column>
   </data>
  </field>
  <field>
   <rect>
    <x>610</x>
    <y>62</y>
    <width>135</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>14</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Head</query>
    <column>qthead_number</column>
   </data>
  </field>
  <label>
   <rect>
    <x>455</x>
    <y>107</y>
    <width>154</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>14</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Test Date:</string>
  </label>
  <field>
   <rect>
    <x>120</x>
    <y>62</y>
    <width>130</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>14</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Head</query>
    <column>qphead_code</column>
   </data>
  </field>
  <field>
   <rect>
    <x>615</x>
    <y>107</y>
    <width>130</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>14</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Head</query>
    <column>f_start_date</column>
   </data>
  </field>
  <label>
   <rect>
    <x>450</x>
    <y>62</y>
    <width>154</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>14</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Test #:</string>
  </label>
  <field>
   <rect>
    <x>340</x>
    <y>62</y>
    <width>130</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>14</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Head</query>
    <column>qthead_rev_number</column>
   </data>
  </field>
  <label>
   <rect>
    <x>250</x>
    <y>62</y>
    <width>89</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>14</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Revision:</string>
  </label>
  <field>
   <rect>
    <x>80</x>
    <y>105</y>
    <width>200</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>14</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Head</query>
    <column>item_number</column>
   </data>
  </field>
  <label>
   <rect>
    <x>5</x>
    <y>145</y>
    <width>60</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>14</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Site:</string>
  </label>
  <label>
   <rect>
    <x>15</x>
    <y>105</y>
    <width>55</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>14</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Item:</string>
  </label>
  <label>
   <rect>
    <x>320</x>
    <y>12</y>
    <width>424</width>
    <height>40</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>20</size>
    <weight>bold</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Certificate of Compliance</string>
  </label>
  <label>
   <rect>
    <x>110</x>
    <y>282</y>
    <width>85</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Description</string>
  </label>
  <label>
   <rect>
    <x>425</x>
    <y>282</y>
    <width>100</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Target</string>
  </label>
  <field>
   <rect>
    <x>80</x>
    <y>125</y>
    <width>420</width>
    <height>17</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Head</query>
    <column>item_descrip1</column>
   </data>
  </field>
  <field>
   <rect>
    <x>80</x>
    <y>145</y>
    <width>215</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>14</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Head</query>
    <column>warehous_code</column>
   </data>
  </field>
  <label>
   <rect>
    <x>655</x>
    <y>282</y>
    <width>100</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Status</string>
  </label>
  <label>
   <rect>
    <x>10</x>
    <y>282</y>
    <width>85</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Line Number</string>
  </label>
  <line>
   <xstart>11</xstart>
   <ystart>307</ystart>
   <xend>823</xend>
   <yend>307</yend>
   <weight>2</weight>
  </line>
  <label>
   <rect>
    <x>20</x>
    <y>170</y>
    <width>110</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>14</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Lot/Serial #:</string>
  </label>
  <label>
   <rect>
    <x>520</x>
    <y>282</y>
    <width>60</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Actual</string>
  </label>
  <label>
   <rect>
    <x>590</x>
    <y>282</y>
    <width>50</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>UOM</string>
  </label>
  <label>
   <rect>
    <x>-45</x>
    <y>62</y>
    <width>154</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>14</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Test Plan:</string>
  </label>
  <label>
   <rect>
    <x>455</x>
    <y>127</y>
    <width>154</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>14</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Completion Date:</string>
  </label>
  <field>
   <rect>
    <x>615</x>
    <y>127</y>
    <width>130</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>14</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Head</query>
    <column>f_completion_date</column>
   </data>
  </field>
  <field>
   <rect>
    <x>30</x>
    <y>85</y>
    <width>465</width>
    <height>17</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Head</query>
    <column>qphead_descrip</column>
   </data>
  </field>
  <label>
   <rect>
    <x>20</x>
    <y>195</y>
    <width>160</width>
    <height>25</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>14</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Originating Doc #:</string>
  </label>
  <field>
   <rect>
    <x>190</x>
    <y>195</y>
    <width>230</width>
    <height>25</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>14</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Head</query>
    <column>document_number</column>
   </data>
  </field>
  <label>
   <rect>
    <x>485</x>
    <y>172</y>
    <width>110</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>14</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Test Status:</string>
  </label>
  <field>
   <rect>
    <x>605</x>
    <y>172</y>
    <width>145</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>14</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Head</query>
    <column>test_status</column>
   </data>
  </field>
  <label>
   <rect>
    <x>445</x>
    <y>197</y>
    <width>150</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>14</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Test Disposition:</string>
  </label>
  <field>
   <rect>
    <x>605</x>
    <y>197</y>
    <width>140</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>14</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Head</query>
    <column>disposition</column>
   </data>
  </field>
  <label>
   <rect>
    <x>35</x>
    <y>227</y>
    <width>70</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Notes:</string>
  </label>
  <text>
   <rect>
    <x>80</x>
    <y>227</y>
    <width>675</width>
    <height>15</height>
   </rect>
   <bottompad>0</bottompad>
   <font>
    <face>Helvetica</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <top/>
   <data>
    <query>Head</query>
    <column>qthead_notes</column>
   </data>
  </text>
 </rpthead>
 <pghead>
  <firstpage/>
  <height>6</height>
 </pghead>
 <pghead>
  <height>47</height>
  <line>
   <xstart>10</xstart>
   <ystart>40</ystart>
   <xend>822</xend>
   <yend>40</yend>
   <weight>2</weight>
  </line>
  <label>
   <rect>
    <x>10</x>
    <y>14</y>
    <width>85</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Line Number</string>
  </label>
  <label>
   <rect>
    <x>670</x>
    <y>14</y>
    <width>100</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Status</string>
  </label>
  <label>
   <rect>
    <x>120</x>
    <y>14</y>
    <width>85</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Description</string>
  </label>
  <label>
   <rect>
    <x>565</x>
    <y>14</y>
    <width>100</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>UOM</string>
  </label>
  <label>
   <rect>
    <x>505</x>
    <y>14</y>
    <width>100</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Actual</string>
  </label>
  <label>
   <rect>
    <x>425</x>
    <y>14</y>
    <width>100</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Target</string>
  </label>
 </pghead>
 <section>
  <name>detail</name>
  <detail>
   <key>
    <query>Detail</query>
   </key>
   <height>55</height>
   <field>
    <rect>
     <x>110</x>
     <y>0</y>
     <width>330</width>
     <height>20</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>10</size>
     <weight>normal</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>Detail</query>
     <column>qtitem_description</column>
    </data>
   </field>
   <field>
    <rect>
     <x>10</x>
     <y>0</y>
     <width>70</width>
     <height>20</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>10</size>
     <weight>normal</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>Detail</query>
     <column>qtitem_linenumber</column>
    </data>
   </field>
   <field>
    <rect>
     <x>445</x>
     <y>0</y>
     <width>65</width>
     <height>20</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>10</size>
     <weight>normal</weight>
    </font>
    <right/>
    <vcenter/>
    <data>
     <query>Detail</query>
     <column>qtitem_target</column>
    </data>
   </field>
   <field>
    <rect>
     <x>520</x>
     <y>0</y>
     <width>60</width>
     <height>20</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>10</size>
     <weight>bold</weight>
     <italic/>
    </font>
    <right/>
    <vcenter/>
    <data>
     <query>Detail</query>
     <column>qtitem_actual</column>
    </data>
   </field>
   <line>
    <xstart>10</xstart>
    <ystart>50</ystart>
    <xend>822</xend>
    <yend>50</yend>
    <weight>0</weight>
   </line>
   <field>
    <rect>
     <x>585</x>
     <y>0</y>
     <width>60</width>
     <height>20</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>10</size>
     <weight>normal</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>Detail</query>
     <column>qtitem_uom</column>
    </data>
   </field>
   <field>
    <rect>
     <x>660</x>
     <y>0</y>
     <width>80</width>
     <height>20</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>10</size>
     <weight>bold</weight>
    </font>
    <right/>
    <vcenter/>
    <data>
     <query>Detail</query>
     <column>test_item_status</column>
    </data>
   </field>
   <text>
    <rect>
     <x>50</x>
     <y>25</y>
     <width>585</width>
     <height>20</height>
    </rect>
    <bottompad>0</bottompad>
    <font>
     <face>Sans Serif</face>
     <size>8</size>
     <weight>normal</weight>
    </font>
    <left/>
    <top/>
    <data>
     <query>Detail</query>
     <column>qtitem_notes</column>
    </data>
   </text>
   <label>
    <rect>
     <x>10</x>
     <y>20</y>
     <width>35</width>
     <height>20</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <vcenter/>
    <string>Notes:</string>
   </label>
  </detail>
 </section>
 <rptfoot>
  <height>150</height>
  <label>
   <rect>
    <x>45</x>
    <y>75</y>
    <width>139</width>
    <height>22</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>12</size>
    <weight>48</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Tested By:</string>
  </label>
  <label>
   <rect>
    <x>510</x>
    <y>75</y>
    <width>139</width>
    <height>22</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>12</size>
    <weight>48</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Date:</string>
  </label>
  <label>
   <rect>
    <x>510</x>
    <y>110</y>
    <width>139</width>
    <height>22</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>12</size>
    <weight>48</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Date:</string>
  </label>
  <label>
   <rect>
    <x>50</x>
    <y>110</y>
    <width>139</width>
    <height>22</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>12</size>
    <weight>48</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Approved By:</string>
  </label>
 </rptfoot>
</report>
